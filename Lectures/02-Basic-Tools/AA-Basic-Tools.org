#+Title: Utvecklingsmilj칬n
#+Author: Mikael Svahnberg
#+Email: Mikael.Svahnberg@bth.se
#+Date: 2023-11-21
#+EPRESENT_FRAME_LEVEL: 1
#+OPTIONS: email:t <:t todo:t f:t ':t H:2
#+STARTUP: beamer

#+LATEX_CLASS_OPTIONS: [10pt,t,a4paper]
#+BEAMER_THEME: BTH_msv


* Introduktion
- Thomas & Hunt; Kapitel 3: The Basic Tools
- Grunderna i Konfigurationshantering
- Installera och bli v칛n med din utvecklingsmilj칬

\sum Allt 칛r text, allt skall konfigurationshanteras.
* Vikten av R칛tt Verktyg
- Det h칛r 칛r din karri칛r. Ditt liv. G칬r det bekv칛mt f칬r dig.

- Grundl칛ggande ergonomi
  - Sitter du r칛tt?
  - Har du r칛tt avst친nd till sk칛rmen?
  - Tar du pauser tillr칛ckligt ofta? Tillr칛ckligt l친nga?

- P친 samma s칛tt: Vilka datorprogram anv칛nder du?
  - Manualer?
  - Informationss칬kning?
  - Samarbetsytor?
  - Kommunikation?
  - *Programmering*?

- G친r det att anv칛nda dessa program effektivt?
  - Hj칛lper de dig, eller 칛r de i v칛gen?
  - 츿r de tangenbordsstyrda eller beh칬ver du ett pekdon?
  - Hur stor andel av sk칛rmen till칛gnas till
    - ditt arbete
    - dator-administrativ br친te?
* Att V칛lja en Utvecklingsmilj칬
Klassiskt /Editor War/: Vi or Emacs
- B친da har fokus p친 en sak: /Redigera text/
- Allting annat fick man f칬rr l칬sa utanf칬r
  - e.g. kompilator, byggsystem, debugger, mm.
  - Idag finns det st칬d i utvecklingsmilj칬n f칬r att anv칛nda de externa verktygen.
  - Men det 칛r ofta bekv칛mt att anv칛nda en terminal

Moderna Alternativ
- IntelliJ
- Eclipse
- Atom
- VS Code / VS Codium

Det viktiga 칛r inte vilken du v칛ljer
- Skall kunna anv칛nda flera olika milj칬er
- Skall kunna se f칬rbi utvecklingsmilj칬n till det du faktiskt utvecklar

/Med VSCode vill jag skriva ett program/
 - eller -
/Med den h칛r filen vill jag g칬ra XX/
* Datorprogram 칛r Text
- Den pragmatiska ansatsen: /Datorprogram 칛r text/
- Allts친 fungerar vilken texteditor som helst. Inklusive Notepad++

- Text f칬rklarar f칬r dig sj칛lv och andra utvecklare vad du vill att datorn skall g칬ra.
- Text kommer alltid vara tillg칛ngligt och l칛sbart
- Text kan vara strukturerat
  - HTML / XML
  - JSON
  - CSV
  - YAML
  - C++ / Java
  - Lisp
- Text kan vara mer eller mindre enkelt att filtrera och arbeta med p친 datorn.
  - /find all files that mention X/
  - /find all rows where the seventh column contains the following datum/
  - /find all entries where the social security number is XXX/
  - \dots
* Bli v칛n med ditt shell
- En terminal 칛r ett program som k칬r ett shell.
  - Kan vara ett GUI-f칬nster
  - Kan vara inb칛ddad i din utvecklingsmilj칬
  - Kan ocks친 vara textbaserat, t.ex. ~tmux~ , ~screen~ , eller ~ssh~

Exempel p친 shell:
- ~/bin/sh~ , ~/usr/bin/bash~
- ~cmd.exe~
- powershell
- git bash
* Shell f칬r att arbeta med datorn
- Utforska filsystemet
- Leta efter filer
- 칐ppna, flytta, ta bort filer.
- Enkel filredigering
- Kompilera och l칛nka din programkod
- Skapa och k칬ra sm친 program ( /shell scripts/ ) f칬r att upprepa arbetsfl칬den

- Koppla upp dig mot andra datorer
- Testa s친 du t.ex. f친r r칛tt svar fr친n en webserver
- Inspektera filer s친 att de inneh친ller r칛tt information
- Installera program
- Hantera vilka processer som k칬rs

- /L칛nka ihop m친nga sm친 program f칬r att l칬sa en st칬rre uppgift/
  - unix /pipes/: ~producer | consumer~
  - Exempel: ~ps -ef | grep emacs | grep -v grep | tr -s ' ' | cut -d ' ' -f 2~
    - ~ps -efc~ lista alla processer
    - ~grep emacs~ visa bara rader d칛r det st친r ~emacs~
    - ~grep -v grep~ ta bort alla rader d칛r det st친r ~grep~
    - ~tr -s ' '~ byt ut alla blanksteg till ett enda
    - ~cut -d ' ' -f 2~ anv칛nd blanksteg som kolumnseparator, spara f칛lt #2

** Lite blandade shell-kommandon
| Aktivitet                                | Unix          | Ms-DOS   |
|------------------------------------------+---------------+----------|
| *Hj칛lp om ett kommando*                    | man <command> | help     |
|                                          | info          |          |
|                                          |               |          |
| lista filer                              | ls            | dir      |
| lista filer med mer information          | ls -l         |          |
| byt katalog                              | cd            | cd       |
| byt katalog, l칛gg nuvarande p친 stacken   | pushd         |          |
| byt tillbaka till f칬rra katalogen        | popd          |          |
| skapa en ny katalog                      | mkdir         | mkdir    |
| ta bort en (tom) katalog                 | rmdir         | rmdir    |
| visa namnet p친 nuvarande katalog         | pwd           |          |
|                                          |               |          |
| visa en fil                              | cat/more/less | type/?/? |
| visa b칬rjan/slutet p친 en fil             | head/tail     |          |
| kopiera en fil                           | cp            | copy     |
| flytta en fil                            | mv            | move     |
| ta bort en fil                           | rm            | del      |
| skapa en tom fil (eller uppdatera datum) | touch         |          |
| byt r칛ttigheter p친 en fil                | chmod         |          |
|                                          |               |          |
| S칬k efter en viss fil                    | find          | find     |
| S칬k efter ett visst inneh친ll             | grep          |          |
|                                          |               |          |
| visa alla milj칬variabler                 | env           |          |
| skriv ut text                            | echo          | echo     |
|------------------------------------------+---------------+----------|

* Att arbeta med Text
Saker som din utvecklingsmilj칬 redan kan, men vet du hur?

- Hoppa till n칛sta ord, rad, stycke.
- Hoppa till n칛sta syntaktisk struktur (sexp, block, ...)
- Indentera raden automatiskt
- Kommentera/avkommentera ett kodblock med ett enda kommando
- 칀ngra kommandon, 친ngra 친ngringen
- Dela f칬nstret i flera delar och hoppa mellan dem.
- G친 till en viss rad.
- Sortera rader
- S칬ka efter str칛ngar och regulj칛ra uttryck
  - Upprepa senaste s칬kningen / ers칛ttningen
- Skapa flera mark칬rer baserat p친 vald text och redigera p친 flera st칛llen samtidigt
- Visa kompileringsfel
- K칬ra tester

V칛lj din utvecklingsmilj칬 s친 att det h칛r blir enkelt f칬r dig.
V칛lj din utvecklingsmilj칬 s친 att du sj칛lv kan l칛gga till och justera hur den fungerar.
V칛lj din utvecklingsmilj칬 s친 att du kan g칬ra det h칛r utan pekdon!
* F칬r칛ndra Text
Exempel p친 behov:
- Byt ut alla kommatecken mot semikolon i en csv-fil
- Byt ut alla f칬rekomster av "Mikael Svahnberg" till "the author" i 500 filer.
- R칛kna alla f칬rekomster av ordet "kibo" i 500 filer. Summera v칛rdet i kolumnen efter.
- Bryt upp alla filer i block om X rader.
  - G칬r om varje block till md5-summor, och
  - lista bara de block som f칬rekommer mer 칛n en g친ng.

Man /kan/ l칬sa mycket av detta i sin editor
- s칛rskilt om den st칬djer makros
- det 칛r s칛llan smidigt eller skalbart

I st칛llet: /Tillbaks till ditt shell/
- ~find~ , ~grep~ , ~cut~ , ~sed~ , ~awk~ 

** Exempel p친 sed
#+begin_src bash :results output
echo "---------- Bara f칬r att visa att det finns en rad med ordet 'Introduktion'"
grep -HnC 3 Introduktion AA-Basic-Tools.org | head -6
echo "\n---------- Nu byter vi ut det mot n친got annat"
cat AA-Basic-Tools.org | sed "s/Introduktion/칐versikt/" | head -20 | tail -10

#+end_src
** Exempel p친 awk
#+begin_src bash :results output
pwd
echo "Find all png files in the first lecture and print their sizes"
find ../01-Introduction -name "*.png" -printf "%s\n"

echo "... and use awk to sum this up"
find ../01-Introduction -name "*.png" -printf "%s\n" | awk 'BEGIN{print "Size is:"}{t+=$1}END{print t/1024 " kB"}'
#+end_src
* Ingenj칬rens Dagbok
- Vad sade ni under det senaste designm칬tet?
- Har du pratat med kunden? Vad sade ni?
- Har du l칬st ett knivigt problem?
- Har du en id칠 p친 hur du skall l칬sa ett knivigt problem?
- P친minn dig om n친got som m친ste g칬ras
- Tvinga dig att reflektera 칬ver vad du faktiskt g칬r eller har gjort.
  - Anv칛nd helst papper och penna; det s칛nker farten och g칬r det m칬jligt att reflektera
  - ... och illustrera.

- Den varken beh칬ver eller skall vara snygg och st칛dad: Det 칛r en f칬rl칛ngning av din hj칛rna.

- J칛mf칬r med lab-boken i Kemi/Fysik: /In case of fire: Save the Notebook!/
- Gamla tiders naturvetare, se utdrag ur Charles Darwin's anteckningsb칬cker nedan:

#+ATTR_ORG: :width 300
[[./IDarwin-Notebook-1.jpg]][[./IDarwin-Notebook-0.jpg]]
* Konfigurationshantering
- /Versionshantering/ kontra /Konfigurationhantering/
- Versionshantering:
  - En gigantisk undo-knapp f칬r en hel fil.
  - Automatiskt sk칬tt, inte en massa idioti med att d칬pa om filerna efter vem som har 칛ndrat dem.
- Konfifurationshantering sk칬ter dessutom
  - Vilka versioner av filer fungerar ihop?
  - I vilka filer implementerar vi /feature X/
  - I vilka filer l칬ser vi /issue Y/ (Bug/feature request/\dots )?
  - Vilka versioner av alla filer 칛r det som k칬r hos /Kund Z/?
  - St칬d f칬r (semi-) automatisk /merge/ om flera har 칛ndrat filen

- K칛nda verktyg (idag)
  - Subversion ::
    - Klassiskt server-orienterat: all CM sker p친 en och samma server
  - Git ::
    - Anv칛nds av de flesta idag
    - I teorin distribuerat; i praktiken ocks친 server-orienterat
  - Mercurial ::
    - Liknar git, men anses av m친nga vara lite enklare
* Hela projektet skall alltid konfigurationshanteras
- K칛llkod
- Designdokumentation
- Dokumentation
- Script f칬r att bygga applikationen
- Script f칬r att st칛lla i ordning utvecklingsmilj칬n / testmilj칬n / produktionsmilj칬n
- Script f칬r att starta applikationen

* Anv칛nd Alltid Konfigurationshantering
- 츿ven om det 칛r ditt eget hobbyprojekt
- Inklusive konfigurationsfiler f칬r att st칛lla i ordning din dator och utvecklingsmilj칬
  - Sv친rt om allt ligger i windows registry
  - L칛tt (och sj칛lvklart) om allt finns i .rc-filer i din anv칛ndarkatalog

*If it's not comitted, it does not exist!*
* Det b칬rjar med en Branch...
- K칛rnan i all konfigurationshantering 칛r att inse att du /alltid/ arbetar p친 en gren
  - Du arbetar med filerna p친 en delad n칛tverkskatalog
  - Du kopierar projektet till din dator
  - Du klonar projektet
  - Du skapar en ny gren f칬r att implementera en ny feature
- Utmaningen blir alltid att kombinera f칬rgreningar med en /merge/
  - Om du 칛r den enda som har redigerat en viss fil
  - Om du 칛r den enda som har redigerat en viss del av en fil
  - Om ni 칛r flera som har redigerat samma del av en viss fil
  - Om du har redigerat en fil som n친gon annan har tagit bort
* Commit
- Ofta beh칬ver man redigera flera filer f칬r att l칬sa en uppgift
- Paketera alla redigerade filer i en =commit=
- En commit har ocks친 ett meddelande som ber칛ttar vad man gjort.
  - Ofta l칛nkat med krav-databasen eller issue-databasen
  - T.ex. Meddelandet ~Fixes #222~ kommer l칛nka denna commit med issue #222.
- Den senaste committen kallas f칬r /head/

*Meddelandet skall vara kort men beskrivande*
- inte bara "redigerade x.txt", utan /varf칬r/, t.ex. "bakgrund om glasstilverkning.", eller "Implementerar krav #23"
- en commit == ett syfte. Flera syften, flera commits.
* Samarbete i ett Repository
[[./git-example1.png]]
* Flera F칬rgreningar/Branches
Man kan ha hur m친nga f칬rgreningar man vill, och skapa dem av vilka anledningar som helst.

Ett strukturerat exempel p친 hur man kan arbeta 칛r /Git Flow/-modellen:
- main :: H친ller bara "stabila" releaser. Man arbetar inte p친 den h칛r f칬rgreningen.
- develop :: Integration av features. Ingen nyutveckling h칛r, utan bara merge-arbete.
- feature :: En per feature man arbetar med. Ny feature == ny f칬rgrening.
- release :: Fixa det sista innan man kan sl칛ppa n칛sta st칬rre release.
- hotfix :: Om man absolut m친ste fixa n친got /just nu/ i den senaste produkten.
[[./git-example-git-flow.png]]

* Att Hantera Merge
- Att kombinera olika f칬rgreningar 칛r sv친rt.
- Moderna konfigurationshanteringsverktyg har slutat f칬rs칬ka.
  - De varnar anv칛ndaren och v칛grar forts칛tta tills dess konflikten 칛r fixad.
- Strategi 1 :: Ha en egen f칬rgrening, t.ex. f칬r en viss feature, d칛r f칛rre utvecklare 칛r inblandade.
- Strategi 2 :: Ha en egen f칬rgrening av feature-f칬rgreningen (local branch).

Men till slut r칛cker inte detta, utan du beh칬ver kombinera grenarna.
- Din lokala gren med gruppens
- Feature-grenen med utvecklingsgrenen
- Utvecklingsgrenen med main-grenen
- I distribuerade CM-verktyg som =git= kan du ocks친 h칛mta en f칬rgrening fr친n en annan utvecklare.

*F칬rr eller senare kommer du d친 beh칬va hantera konflikter mellan grenarna.*
* diff
#+begin_src bash :results output
cd /tmp
echo "aaa" > first.txt ; echo "aaa" > second.txt
echo "bbb" >> first.txt; echo "BBB" >> second.txt
echo "ccc" >> first.txt; echo "ccc" >> second.txt
echo "ddd" >> second.txt

diff first.txt second.txt
#+end_src

#+RESULTS:
: 2c2
: < bbb
: ---
: > BBB
: 3a4
: > ddd
* Three-Way Merge
- Anv칛nder ett gemensamt ursprung f칬r att avg칬ra om f칬r칛ndringar 칛r nya eller inte.
- Skapar ibland lite nya problem
  - Vad h칛nder t.ex. i figuren nedan om "GG" anv칛nder sig av "AA"?
  - t.ex. en ~#include~ , eller en referens i text /"som tidigare n칛mnt"/
- N칛r b친da filerna 칛ndrats s친 m친ste anv칛ndaren besluta (t.ex. =f or fff?= )
[[./threewaymerge.png]]
* Merge med git
Antag: Du st친r i branchen =feature1=
- Ny fil: f1-klass.cc
- Ny fil: f1-header.hh
- F칬r칛ndrad fil: context.cc

F칬rst: Se till att allt 칛r committat:
#+begin_src bash
git add .
git commit -m "implements requirement #feature1"
#+end_src

Sedan: Genomf칬r merge fr친n =master= (Du "drar" alltid in de 칛ndringar du vill ha)
#+begin_src bash
git checkout master
git merge feature1
#+end_src
* Merge med konflikter
- Varning: Det h칛r blir kr친ngligt
- Merge-konflikter kommer h칛nda
- Det 칛r lika bra ni f친r ser vad man g칬r 친t dem.
** Samma exempel som innan
[[./threewaymerge.png]]
** ... I olika grenar
=base= ligger i grenen =master=, =source= ligger i =src=, och =target= i =trg=:

#+begin_src bash
$ git log --all --graph --abbrev-commit --decorate --oneline
 * efd01a3 (HEAD -> trg) trg
 | * 95b9019 (src) src
 |/
 * 107e415 (master) base
#+end_src

** F칬rs칬k med en merge
#+begin_src bash
$ git status
On branch trg
...

$ git merge src
Auto-merging c.txt
CONFLICT (content): Merge conflict in c.txt
Automatic merge failed; fix conflicts and then commit the result.
#+end_src

Vi kan alltid ge upp: ~git merge --abort~, men hur kul 칛r det?
** Git markerar f칬r칛ndringarna
L친t oss se vad git har gett oss:
#+begin_src bash
$ cat c.txt
<<<<<<< HEAD
AA
GG
=======
>>>>>>> src
BB
CC
ddd
EE
<<<<<<< HEAD
f
DD
=======
fff

>>>>>>> src
#+end_src

Bl칛! Vi beh칬ver (칬nskar) ett verktyg f칬r att kunna arbeta med detta:

#+begin_src bash
git mergetool --tool=kdiff3
#+end_src
** L칬s konflikter
#+ATTR_ORG: :width 600
[[./kdiff-screenshot.png]]

*Slutresultatet 칛r att jag har gjort min merge sj칛lv. =src= 칛r nu j칛mkad med =trg= .*
- Jag beh칬ver allts친 inte k칬ra git merge igen
- =master= har inget som inte finns i =trg=, s친 den visas som samma gren. Just nu i alla fall.
  - Om jag g칬r en merge i =master= fr친n =trg= s친 kommer bara =master= snabbspolas fram till =HEAD=.

#+begin_src bash
$ git log --all --graph --abbrev-commit --decorate --oneline
 *   9b00fb9 (HEAD -> trg) merged
 |\
 | * 95b9019 (src) src
 * | efd01a3 trg
 |/
 * 107e415 (master) base
#+end_src

* Grundl칛ggande kommandon
** git init -- Starta ett tomt repository
Helt nytt och enbart lokalt:

#+begin_src bash :session gitex :results output
mkdir git-example
cd git-example
git init
#+end_src
** git clone -- klona ett existerande repository
H칛mta ett existerande projekt:

#+begin_src bash :results output
  git clone git@github.com:mickesv/MeanStreets.git /tmp/ms
  ls -l /tmp/ms
#+end_src

** git status -- Var 칛r jag, vad beh칬ver g칬ras?
#+begin_src bash :session gitex :results output
echo "hello" > h.txt
echo "world" > w.txt
ls -l
cat *

git status # Kolla vad git anser om det vi har s친h칛r l친ngt
#+end_src

#+RESULTS:
#+begin_example
total 8
-rw-r--r-- 1 msv msv 6 28 nov 12.48 h.txt
-rw-r--r-- 1 msv msv 6 28 nov 12.48 w.txt
hello
world
On branch master

No commits yet

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	h.txt
	w.txt

nothing added to commit but untracked files present (use "git add" to track)
#+end_example
** git add -- Skapa en Commit, steg 1: The staging area
- Staging area 칛r ett omr친de d칛r man kan "plocka ihop" allting som man vill skall h칛nga ihop i en commit
- Man kan g칬ra ganska komplexa saker h칛r (l칛gga till en del av en fil, t.ex.)
- oftast handlar det bara om att man skall v칛lja ut filerna.

#+begin_src bash :session gitex :results output
git add h.txt
git add w.txt
git rm --cached w.txt # Jag 친ngrade mig, den h칛r skall inte med 칛n.
# git add --all   # l칛gger till alla filer som inte 칛r tillagda 칛n.

git status
#+end_src

#+RESULTS:
#+begin_example
rm 'w.txt'
On branch master

No commits yet

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)
	new file:   h.txt

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	w.txt
#+end_example
** git commit -- Skapa en Commit, steg 2
- Nu 칛r vi redo att committa allt som vi har i v친r staging area.

#+begin_src bash :session gitex :results output
git commit -m "Finally"
git status
#+end_src

#+RESULTS:
: [master (root-commit) 5e95b81] Finally
:  1 file changed, 1 insertion(+)
:  create mode 100644 h.txt
: On branch master
: Untracked files:
:   (use "git add <file>..." to include in what will be committed)
: 	w.txt
: 
: nothing added to commit but untracked files present (use "git add" to track)
** git log -- Kolla Loggen
#+begin_src bash :results output
cd /tmp/ms
git log --all | cat -
# git log --all --graph --abbrev-commit --decorate --oneline | cat -
#+end_src

#+RESULTS:
#+begin_example
commit 74aa928841ecaa76f43e2bcfe76421a1263e778f
Author: Mikael Svahnberg <msv@msv-mac.local>
Date:   Wed Mar 3 13:45:04 2021 +0100

    minor edit

commit 652e5e057f23e8c4e064a22976cb58fabea81a49
Author: Mikael Svahnberg <msv@msv-mac.local>
Date:   Wed Nov 11 10:37:18 2020 +0100

    Functional OO Programming text

commit 8abc530fc317392af51842c9f72c9550d71a63fc
Author: Mikael Svahnberg <msv@msv-mac.local>
Date:   Fri Oct 30 08:00:50 2020 +0100

    most of the scaffolding in place
#+end_example
** git stash -- L칛gg 친t sidan n칛r du blir avbruten
#+begin_src bash :session gitex :results output
# Jag vill jobba med task 1
git branch task1
git checkout task1
echo "sss" > s.txt

# Kompisen kommer p친 bes칬k och vi skall jobba p친 task 2
# Stoppa undan det jag h칬ll p친 med:
git add s.txt
git stash -m "jobbar p친 task1"

# Skapa en ny branch f칬r task2 och jobba p친
git branch task2
git checkout task2
echo "eee" > e.txt
ls -l
git add e.txt
git commit -m "task2 klar"

# Nu 칛r vi klara. Kompisen har g친tt, och jag kan forts칛tta med task1
# Byt tillbaka till r칛tt branch, och plocka fram arbetet igen
git checkout task1
git stash pop

# Jobba op
ls -l
git status
echo "vvvv" > s.txt
git status

# Nu 칛r jag klar, dags att committa.
git add s.txt
git commit -m "task1 klar"
#+end_src

* Arbeta mot en Server
- Git 칛r konstruerat f칬r att vara distribuerat
- I praktiken arbetar man n칛stan alltid mot en server 칛nd친
- /merge with origin:master/ har sitt eget kommando: ~git push~
  - I alla 칬vriga fall s친 /drar/ man in f칬r칛ndringarna till den branch man 칛r i
  - I det h칛r fallet s친 /trycker/ man (push) upp til servern.

[[./git-example1.png]]
** Arbetsfl칬de
#+begin_src bash
# Download the project
git clone https://codeberg.org/mickesv/gitex.git

# Enter the directory and make some edits
cd gitex
git checkout -b testar
echo "bb" > b.txt
git add b.txt
git commit -m "added b"

# Merge back to main
git checkout main
git merge testar

# push to server
git push
#+end_src
** N칛r git push inte funkar
- t.ex. n칛r n친gon annan gjort en push under tiden

#+begin_src bash
$ git push
Username for 'https://codeberg.org': mickesv
Password for 'https://mickesv@codeberg.org':
To https://codeberg.org/mickesv/gitex.git
 ! [rejected]        main -> main (fetch first)
error: failed to push some refs to 'https://codeberg.org/mickesv/gitex.git'
#+end_src
** git fetch -- h칛mta vad som 칛r nytt fr친n =origin=
#+begin_src bash
# H칛mta allt nytt men g칬r ingenting annat
$ git fetch
remote: Enumerating objects: 4, done.
remote: Counting objects: 100% (4/4), done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (3/3), 277 bytes | 277.00 KiB/s, done.
From https://codeberg.org/mickesv/gitex
   07c6db7..497cb6d  main       -> origin/main

$ git branch --all
 * main
   testar
   remotes/origin/main      # <- H칛r ligger allt som h칛mtades
#+end_src

- Det rekommenderas att anv칛nda ~git fetch~
- Ger dig tid att studera vad som har h칛nt i =origin/main=
- Kan till exempel j칛mf칬ra grenarna: ~git diff main origin/main~
- N칛r du 칛r klar anv칛nder du ~git merge origin/main~ f칬ljt av ~git push~

*Genv칛g* Det finns ocks친 ~git pull~ 
- Ungef칛r en =fetch= f칬ljt av en =merge=
- L칬ser n칛stan alla problem -- men inte alltid
- ~git fetch~ ger dig m칬jlighet att verifiera att allt kommer bli r칛tt.
** Resultat av git fetch/git merge
#+begin_src bash
$ git log --all --graph --abbrev-commit --decorate --oneline
 *   e644bdf (HEAD -> main, origin/main) Merge remote-tracking branch 'origin/main'
 |\                                 # 2. merge, s친 att din main 칛r samma som origin/main
 | * 497cb6d c.txt                  # 1. Det h칛r skedde n친gon annanstans; fetch tar hem den till dig
 * | 2a655d9 addded d
 |/
 * 07c6db7 (testar) added b
 * f28fad6 added a 
#+end_src

- Du *tror* bara att du 칛r i synk med =origin/main=
- Du /vet/ inte f칬rr칛n du faktiskt g칬r din ~git push~ 
- Det h칛r kan bli ett problem om branchen 칛r v칛ldigt aktiv.
* Fork av ett projekt
- Specifikt f칬r vissa github-servrar
- N칛r man vill bidra till ett projekt s친 b칬rjar man med att skapa sin egen kopia, en =fork=
- Man arbetar sedan som vanligt.
- N칛r man 칛r n칬jd skapar man en =pull request= i originalprojektet
- 츿garen av originalprojektet kan d친 inspektera f칬r칛ndringarna och (om de godk칛nner dem) g칬ra en =merge= med sitt projekt.
- B친da tv친 kan forts칛tta arbeta med sina respektive kopior av projektet. De beh칬ver inte f칬rena dem.
[[./git-fork.png]]
* Sammanfattning
*Allt 칛r Text*
- Att programmera handlar om att skriva text
- Att arbeta med en dator handlar om att ge den kommandon
- Att arbeta effektivt med en dator handlar om att kunna automatisera arbetsfl칬den
  - Allts친 skriva sm친 program
  - Allts친 att skriva text
- M친nga g친nger har man inte ens tillg친ng till mer 칛n en textbaserad kommandorads-tolk
- \sum L칛r dig hantera text!
- \sum V칛lj en utvecklingsmilj칬 som g칬r det enkelt att hantera text.

*Konfigurationshantering*
- Att programmera 칛r att samarbeta
- Man utvecklar inte linj칛rt. Man g칬r fel, man vill g친 tillbaka, man vill prova olika v칛gar.
- Det kr칛vs kraftfulla verktyg f칬r att h칛nga med n칛r alla i ett projekt utvecklar icke-linj칛rt.
  - Verktyg f칬r konfigurationshantering
- Vanligast idag: =git=
- St칬rsta utmaningen:
  - Att ost칬rt kunna arbeta i din egen f칬rgrening
  - Att kunna j칛mka samman din kod med resten av projektet med hj칛lp av en =merge=.

*Anv칛nd Alltid Konfigurationshantering. Anv칛nd Konfigurationshantering till Allt.*
L칛r dig mantrat: /"If it's not committed, it does not exist!"/
* N칛sta F칬rel칛sning: Testing and Debugging
- Thomas & Hunt: *Kapitel 7: While you are Coding*
- Thomas & Hunt: Kapitel 3; topic 20: Debugging
- Thomas & Hunt: Kapitel 9; topic 51: Pragmatic Starter Kit
* 칐vning: Kom ig친ng med din IDE :Practice:
- Starta =IntelliJ IDEA= eller den IDE du har valt (e.g. =VS Code= eller =VS Codium=) .
- Skapa ett Projekt =New Project=
  - Name: =TestProjekt=
  - Language: =Java=
  - =Create=

Vad ser du nu? 
Vad ser du i kod-f칬nstret?
Vad betyder symbolerna? 郊윒잺游띔游눠丘멆잺

Hur k칬r du programmet?
Vad h칛nder?

Hur k칬r du programmet i debug-l칛ge?
Vad h칛nder nu? Hur g친r du vidare?
** Redigera Main.java
- L칛gg till en metod i klassen, =public static int addTen(int x)=
  - Skriv metoden ovanf칬r main-funktionen (mellan rad 3 och 4)
  - Den skall l칛gga till 10 till =x= och returnera detta
- L칛gg till raden ~System.out.println("i+10 = " + addTen(i));~
- K칬r programmet nu. Vad h칛nder?

IntelliJ f칬rs칬ker hela tiden ge dig ledtr친dar p친 vad du kan skiva. 
- Hur ser detta ut?
- Vad f친r du f칬r hj칛lp?
- Hj칛lper det faktiskt, eller 칛r det i v칛gen?

#+begin_src java
public class Main {

    public static void main(String[] args) {
        System.out.printf("Hello and welcome!");
    }
}
#+end_src
** Hj칛lp
- St칛ll dig n친gonstans d칛r det st친r ~println~ och tryck =ctrl-Q=
  - Du kan ocks친 komma 친t detta via =View= -menyn. Vad mer kan du hitta d칛r?
** L칛gg till en ny klass
- =File/New/Java Class=
- Name: =Nummer=
- Skriv in f칬ljande kod efter rad 1:
#+begin_src java
  private int myNumber=0;

  public Nummer(int x) {
    myNumber = x;
  }

  public boolean smallerThan(int x) {
    return (myNumber < x);
  }

  public int get() {
    return myNumber;
  }

  public String toString() {
    return "Number: " + myNumber;
  }
#+end_src

** Anv칛nd den nya klassen
- Byt tillbaka till =Main.java= och l칛gg till f칬ljande kod efter rad 12:
#+begin_src java
  Nummer num = new Nummer(10);
  System.out.println("Is "+ num + " smaller than 12: " + num.smallerThan(12));
#+end_src

Vilken "hj칛lp" f친r du n칛r du skriver detta?
Hur kan du k칬ra det h칛r programmet utan att str칛cka dig efter musen?

F칬rsta raden av utskriften blir: =Hello and welcome!Is Number: 10 smaller than 12: true=
- Hur kan du fixa s친 att du f친r en ny rad efter "welcome!"?
- Vad kan du g칬ra f칬r att bara skriva ut siffran 10 och inte "Number: 10"?
** G칬r editorn din
- M친ste allt synas samtidigt? Hur g칬mmer du undan saker?
- Gillar du inte f칛rgschemat? Hur byter du?

- Det finns gott om plugins. =File/Settings/Plugins=
  - Vilka vill du installera? Vilka 칛r redan installerade?
** Hitta Terminalen
- Det finns en inbyggd kommandoradstolk. Var d친?
- Vad kan du g칬ra med den?
* 칐vning: Kom ig친ng med Git :Practice:
** Registrera ett Konto
- M친ste tyv칛rr b칬rja med att registrera ett konto p친 n친gon server.
  - https://github.com/signup eller https://education.github.com/pack
  - https://gitlab.com/users/sign_up
  - https://www.atlassian.com/software/bitbucket/bundle
  - https://codeberg.org/user/cbrgp/9hnjXJs

- Github 칛r fortfarande v칛ldigt stort f칬r open source-projekt
  - Lite i bl친sv칛der f칬r hur de anv칛nder koden som du laddar upp dit
- M친nga migrerade 칬ver till Gitlab n칛r Microsoft k칬pte Github
- Atlassian och Bitbucket har bra integration med deras 칬vriga produkter.
  - Brukade vara v칛ldigt gener칬sa f칬r studenter och universitet (numera vet jag inte)
- Codeberg.org 칛r specifikt fokuserat p친 open-source-projekt

** Skapa och klona ett Repository
- L칛ttast att b칬rja i webgr칛nssnittet
- D칬p projektet till n친got kreativt, t.ex. =gitexempel=
- N칛r du 칛r klar b칬r du kunna hitta en l칛nk, t.ex. under =<> Code= som du kan anv칛nda f칬r att klona projektet
  - ~git clone https://codeberg.org/mickesv/gitex.git~
  - Det h칛r s칛tter up =remote/origin= mm. 친t dig.
** Skapa lite git-historia
1. Skapa n친gra filer
2. L칛gg till dem till stashen och committa
3. 츿ndra n친gon av filerna; l칛gg till och committa igen
4. Upprepa n친gra g친nger
5. Skapa en branch
6. Skapa n친gra filer, l칛gg till och committa.
7. Redigera n친gon av dina f칬rsta filer, committa.
8. Kolla loggen
9. Kolla status
10. Pusha till servern
11. Kolla status
** Forka en kollegas repository
1. Leta r칛tt p친 en kollegas konto (p친 samma server)
2. V칛lj ett repository och forka det (L칛mpligen exempel-kontot som ni nyss skapade)
3. Klona ner det till din dator och skapa lite mer git-historia
4. N칛r du har pushat allt till din fork, skapa en =pull request= hos deras repository (via webben)
** Hantera en pull request
N칛r din kollega har skapat en pull request mot ditt repo, hantera den:
- Inspektera commit f칬r commit vad som 칛r 칛ndrat
- G친r den att merga automatiskt? Det borde st친 n친gonstans.
- Skapa en merge commit.

Skapa n친gra fler commits i era respektive forkar
- Skapa en ny pull request
- Den h칛r g친ngen skall ni /neka/ pull requesten.
** Fler deltagare i samma projekt
- Dela in er i grupper om ca 5 personer
- V칛lj en kollegas repository
- G친 till =Settings/Collaborators= och l칛gg till fler av er p친 samma projekt.
- Klona repot

Nu f친r ni bara arbeta i en viss fil =charlie-foxtrot.txt=
- Ni f친r skriva ny text
- Ni f친r redigera texten som finns d칛r
- Ni f친r stoppa in text: mellan tv친 rader, och mitt i en rad.
- Ni f친r ta bort text

Committa regelbundet (max 2-3 칛ndringar per commit)
Pusha efter varje commit
- Ni kan beh칬va g칬ra en =fetch/merge= f칬r att f친 g칬ra en =push=

*hantera merge-konflikterna*

Diskutera i sm친 grupper: Hur skall ni g칬ra f칬r att f친 f칛rre konflikter?

